<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Firebase Queue UI</title>

  <link href="favicon.png" rel="icon" type="image/png">

  <!-- build:css /styles/vendor.css -->
  <link rel="stylesheet" href="/styles/vendor.css">
  <!-- endbuild -->

  <!-- build:css /styles/main.css -->
  <link rel="stylesheet" href="/styles/main.css">
  <!-- endbuild -->

  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">

  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">

    <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
      <div class="mdl-layout__header-row">

        <span class="mdl-layout-title">
          <span class="logo h-s-mr-10"></span>

          <span class="logo__text">Firebase Queue UI</span>
        </span>

      </div>

      <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
        <a href="#all" class="mdl-layout__tab is-active"><i class="material-icons md-light icon--tab h-s-pr-5">content_copy</i> All</a>
        <a href="#queued" class="mdl-layout__tab"><i class="material-icons md-light icon--tab h-s-pr-5">line_weight</i> Queued</a>
        <a href="#inprogress" class="mdl-layout__tab"><i class="material-icons md-light icon--tab h-s-pr-5">cached</i> In Progress</a>
        <a href="#failed" class="mdl-layout__tab"><i class="material-icons md-light icon--tab h-s-pr-5">close</i> Failed</a>

        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--4dp mdl-color--accent" id="add-job">
            <i class="material-icons" role="presentation">add</i>
            <span class="visuallyhidden">Add</span>
          </button>
      </div>
    </header>

    <section id="drawer" class="mdl-layout__drawer">
      <span class="mdl-layout-title mdl-layout__drawer__title">Queues</span>

      <nav class="mdl-navigation" v-for="item in items">
        <a class="mdl-navigation__link" :href="item.path">{{ item.name }}</a>
      </nav>

      <span class="mdl-layout-title mdl-layout__drawer__title h-s-pt-15">Account</span>

      <nav class="mdl-navigation">
        <a href="#" class="mdl-navigation__link" v-on:click.stop.prevent="logout()">Logout</a>
      </nav>
    </section>

    <main class="mdl-layout__content">

      <section class="section section--center">

        <div id="cards">
          <template id="card-error" v-if="!queueLength">
            <div class="mdl-card mdl-shadow--2dp mdl-card--large">
              <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">No Results</h2>
              </div>

              <div class="mdl-card__supporting-text">
                Could not locate any tasks. Are you sure path <code><b>{{ path }}</b></code> is correct?
              </div>
            </div>
          </template>

          <template id="card" v-if="queueLength">
            <div class="mdl-card mdl-card--tasks mdl-shadow--2dp mdl-card--large" v-for="(item, key, index) in items" v-if="key !== '.key'" v-bind:key="item['.key']" v-bind:class="{ 'mdl-card--expanded': isExpanded }">
              <a href="" class="mdl-card__expand" v-on:click.stop.prevent="toggleItem()">
                <div class="mdl-card__title">
                  <h5 class="mdl-card__title-text mdl-color-text--grey-700">
                    <i class="material-icons md-light icon--tab h-s-pr-10"></i>
                    {{ key }}
                  </h5>
                </div>
              </a>

              <div class="mdl-card__menu mdl-card__more">
                <button v-bind:id="action-{{index}}" class="mdl-button mdl-js-button mdl-button--icon">
                  <i class="material-icons">more_vert</i>
                </button>
              </div>

              <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" v-bind:for="action-{{index}}">
                <li class="mdl-menu__item"><a href="#" v-on:click.stop.prevent="retryItem(item)">Retry</a></li>
                <li class="mdl-menu__item"><a href="#" v-on:click.stop.prevent="removeItem(item)">Remove</a></li>
              </ul>

              <div class="mdl-card__info">
                <div class="mdl-card__title">
                  <h5 class="mdl-card__title-text mdl-card__title-text--queue h-s-mb-10">Data</h5>
                </div>

                <div class="mdl-card__supporting-text">
                  <pre class="mdl-card__code">{{ item.data }}</pre>
                </div>

                <div class="mdl-card__supporting-text">
                  <p><b>Action:</b> {{ item.action }}</p>
                  <p><b>State:</b> {{ item._state }}</p>
                  <p><b>Resource:</b> {{ item.resource }}</p>
                </div>

                <div class="mdl-card__title">
                  <h5 class="mdl-card__title-text mdl-card__title-text--queue h-s-mb-10">Headers</h5>
                </div>

                <div class="mdl-card__supporting-text">
                  <pre class="mdl-card__code">{{ item.headers }}</pre>
                </div>

                <div class="mdl-card__supporting-text">
                  <b>Last Updated:</b> {{ item._state_changed | moment }}
                </div>
              </div>
            </div>
          </template>
        </div>

      </section>

    </main>

  </div>

  <!-- build:js /scripts/queue-page.js -->
  <script src="/scripts/queue-page.js"></script>
  <!-- endbuild -->
</body>
</html>
